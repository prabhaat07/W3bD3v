window.__require=function e(l,t,o){function r(c,i){if(!t[c]){if(!l[c]){var s=c.split("/");if(s=s[s.length-1],!l[s]){var d="function"==typeof __require&&__require;if(!i&&d)return d(s,!0);if(n)return n(s,!0);throw new Error("Cannot find module '"+c+"'")}}var p=t[c]={exports:{}};l[c][0].call(p.exports,function(e){return r(l[c][1][e]||e)},p,p.exports,e,l,t,o)}return t[c].exports}for(var n="function"==typeof __require&&__require,c=0;c<o.length;c++)r(o[c]);return r}({BaseClass:[function(e,l,t){"use strict";cc._RF.push(l,"9a1f2TVPlFIzLN8Vw/pTJ9t","BaseClass");var o=this&&this.__extends||function(){var e=function(l,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,l){e.__proto__=l}||function(e,l){for(var t in l)l.hasOwnProperty(t)&&(e[t]=l[t])})(l,t)};return function(l,t){function o(){this.constructor=l}e(l,t),l.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,l,t,o){var r,n=arguments.length,c=n<3?l:null===o?o=Object.getOwnPropertyDescriptor(l,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,l,t,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(n<3?r(c):n>3?r(l,t,c):r(l,t))||c);return n>3&&c&&Object.defineProperty(l,t,c),c};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,c=n.ccclass,i=n.property,s=function(e){function l(){var l=null!==e&&e.apply(this,arguments)||this;return l.controllers=null,l.views=null,l}return o(l,e),l.prototype.SetController=function(e){return this.controllers.getComponentInChildren(e)},l.prototype.SetView=function(e){return this.views.getComponentInChildren(e)},r([i(cc.Node)],l.prototype,"controllers",void 0),r([i(cc.Node)],l.prototype,"views",void 0),l=r([c],l)}(cc.Component);t.default=s,cc._RF.pop()},{}],CellModel:[function(e,l,t){"use strict";cc._RF.push(l,"a96daPKFY9G045j2wka+Aml","CellModel"),Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.EMPTY=0]="EMPTY",e[e.RED=1]="RED",e[e.BLUE=2]="BLUE",e[e.GREEN=3]="GREEN"}(t.CellType||(t.CellType={})),function(e){e[e.START=0]="START",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL",e[e.UPHALF=3]="UPHALF",e[e.DOWNHALF=4]="DOWNHALF",e[e.LEFTHALF=5]="LEFTHALF",e[e.RIGHTHALF=6]="RIGHTHALF",e[e.LEFTUP=7]="LEFTUP",e[e.LEFTDOWN=8]="LEFTDOWN",e[e.RIGHTUP=9]="RIGHTUP",e[e.RIGHTDOWN=10]="RIGHTDOWN"}(t.CellState||(t.CellState={}));var o=function(){return function(){}}();t.default=o,cc._RF.pop()},{}],CellView:[function(e,l,t){"use strict";cc._RF.push(l,"c5a6cnwnOdMPKf/rz3AfpF+","CellView");var o=this&&this.__extends||function(){var e=function(l,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,l){e.__proto__=l}||function(e,l){for(var t in l)l.hasOwnProperty(t)&&(e[t]=l[t])})(l,t)};return function(l,t){function o(){this.constructor=l}e(l,t),l.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,l,t,o){var r,n=arguments.length,c=n<3?l:null===o?o=Object.getOwnPropertyDescriptor(l,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,l,t,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(n<3?r(c):n>3?r(l,t,c):r(l,t))||c);return n>3&&c&&Object.defineProperty(l,t,c),c};Object.defineProperty(t,"__esModule",{value:!0});var n=e("../Models/CellModel"),c=cc._decorator,i=c.ccclass,s=(c.property,function(e){function l(){return null!==e&&e.apply(this,arguments)||this}return o(l,e),l.prototype.onCollisionEnter=function(e,l){this.gridController.OnTileInteraction(e,l)},l.prototype.SetModel=function(e,l,t,o,r,c){this.cellModel=new n.default,this.cellModel.cellId=e,this.cellModel.cellIdPrevious=l,this.cellModel.cellIdNext=t,this.cellModel.cellType=o,this.cellModel.cellState=r,this.cellModel.isEndNode=c},l.prototype.Init=function(e){this.gridController=e},l=r([i],l)}(cc.Component));t.default=s,cc._RF.pop()},{"../Models/CellModel":"CellModel"}],GameController:[function(e,l,t){"use strict";cc._RF.push(l,"13b944wFlpJ07D4JNGxRCXK","GameController");var o=this&&this.__extends||function(){var e=function(l,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,l){e.__proto__=l}||function(e,l){for(var t in l)l.hasOwnProperty(t)&&(e[t]=l[t])})(l,t)};return function(l,t){function o(){this.constructor=l}e(l,t),l.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,l,t,o){var r,n=arguments.length,c=n<3?l:null===o?o=Object.getOwnPropertyDescriptor(l,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,l,t,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(n<3?r(c):n>3?r(l,t,c):r(l,t))||c);return n>3&&c&&Object.defineProperty(l,t,c),c};Object.defineProperty(t,"__esModule",{value:!0});var n=e("../../Common/Utils/BaseClass"),c=e("../../Common/Managers/GameManager"),i=e("./GridController"),s=e("../Views/GameView"),d=cc._decorator,p=d.ccclass,a=(d.property,function(e){function l(){var l=null!==e&&e.apply(this,arguments)||this;return l.gridController=null,l.gameView=null,l.completedFlows=0,l.totalFlows=3,l}return o(l,e),l.prototype.onLoad=function(){this.completedFlows=0,c.default.Instance.Init(),cc.director.getCollisionManager().enabled=!0},l.prototype.start=function(){this.gridController=this.SetController(i.default),this.gameView=this.SetView(s.default),this.gameView=this.SetView(s.default),this.gameView.Init(),this.gridController.GenerateGrid()},l.prototype.FlowCompleted=function(){++this.completedFlows,this.completedFlows==this.totalFlows&&this.gameView.LevelFinish()},l.prototype.OnLevelComplete=function(){this.gameView.LevelFinish()},l=r([p],l)}(n.default));t.default=a,cc._RF.pop()},{"../../Common/Managers/GameManager":"GameManager","../../Common/Utils/BaseClass":"BaseClass","../Views/GameView":"GameView","./GridController":"GridController"}],GameManager:[function(e,l,t){"use strict";cc._RF.push(l,"7ce92aMQB1ORY1N5FZQGDDu","GameManager");var o=this&&this.__extends||function(){var e=function(l,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,l){e.__proto__=l}||function(e,l){for(var t in l)l.hasOwnProperty(t)&&(e[t]=l[t])})(l,t)};return function(l,t){function o(){this.constructor=l}e(l,t),l.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,l,t,o){var r,n=arguments.length,c=n<3?l:null===o?o=Object.getOwnPropertyDescriptor(l,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,l,t,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(n<3?r(c):n>3?r(l,t,c):r(l,t))||c);return n>3&&c&&Object.defineProperty(l,t,c),c};Object.defineProperty(t,"__esModule",{value:!0});var n=e("../../Game/Models/CellModel"),c=cc._decorator,i=c.ccclass,s=(c.property,function(e){function l(){var l=null!==e&&e.apply(this,arguments)||this;return l.grid=Array(),l}var t;return o(l,e),t=l,l.prototype.onLoad=function(){null==t.Instance?(t.Instance=this,cc.game.addPersistRootNode(this.node)):this.destroy()},l.prototype.Init=function(){this.grid=new Array,this.grid=[[n.CellType.BLUE,n.CellType.GREEN,n.CellType.EMPTY,n.CellType.EMPTY,n.CellType.EMPTY],[n.CellType.EMPTY,n.CellType.EMPTY,n.CellType.EMPTY,n.CellType.EMPTY,n.CellType.EMPTY],[n.CellType.EMPTY,n.CellType.EMPTY,n.CellType.RED,n.CellType.EMPTY,n.CellType.EMPTY],[n.CellType.EMPTY,n.CellType.GREEN,n.CellType.BLUE,n.CellType.EMPTY,n.CellType.EMPTY],[n.CellType.RED,n.CellType.EMPTY,n.CellType.EMPTY,n.CellType.EMPTY,n.CellType.EMPTY]]},l.Instance=null,l=t=r([i],l)}(cc.Component));t.default=s,cc._RF.pop()},{"../../Game/Models/CellModel":"CellModel"}],GameView:[function(e,l,t){"use strict";cc._RF.push(l,"cdf42A8dehEJ6aXVpmXOpfO","GameView");var o=this&&this.__extends||function(){var e=function(l,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,l){e.__proto__=l}||function(e,l){for(var t in l)l.hasOwnProperty(t)&&(e[t]=l[t])})(l,t)};return function(l,t){function o(){this.constructor=l}e(l,t),l.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,l,t,o){var r,n=arguments.length,c=n<3?l:null===o?o=Object.getOwnPropertyDescriptor(l,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,l,t,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(n<3?r(c):n>3?r(l,t,c):r(l,t))||c);return n>3&&c&&Object.defineProperty(l,t,c),c};Object.defineProperty(t,"__esModule",{value:!0});var n=e("../../Common/Utils/BaseClass"),c=cc._decorator,i=c.ccclass,s=c.property,d=function(e){function l(){var l=null!==e&&e.apply(this,arguments)||this;return l.levelFinishPanel=null,l.grid=null,l}return o(l,e),l.prototype.Init=function(){this.grid.active=!0},l.prototype.LevelFinish=function(){this.grid.active=!1,this.levelFinishPanel.active=!0},l.prototype.PlayAgain=function(){cc.director.loadScene("Game")},r([s(cc.Node)],l.prototype,"levelFinishPanel",void 0),r([s(cc.Node)],l.prototype,"grid",void 0),l=r([i],l)}(n.default);t.default=d,cc._RF.pop()},{"../../Common/Utils/BaseClass":"BaseClass"}],GridController:[function(e,l,t){"use strict";cc._RF.push(l,"218046hcSdFq4LwwehqjJZn","GridController");var o=this&&this.__extends||function(){var e=function(l,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,l){e.__proto__=l}||function(e,l){for(var t in l)l.hasOwnProperty(t)&&(e[t]=l[t])})(l,t)};return function(l,t){function o(){this.constructor=l}e(l,t),l.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,l,t,o){var r,n=arguments.length,c=n<3?l:null===o?o=Object.getOwnPropertyDescriptor(l,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,l,t,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(n<3?r(c):n>3?r(l,t,c):r(l,t))||c);return n>3&&c&&Object.defineProperty(l,t,c),c};Object.defineProperty(t,"__esModule",{value:!0});var n=e("../../Common/Utils/BaseClass"),c=e("../Views/GridView"),i=e("../../Common/Managers/GameManager"),s=e("./GameController"),d=cc._decorator,p=d.ccclass,a=(d.property,function(e){function l(){var l=null!==e&&e.apply(this,arguments)||this;return l.gridView=null,l.gameController=null,l}return o(l,e),l.prototype.Init=function(){this.gridView=this.SetView(c.default),this.gameController=this.SetController(s.default)},l.prototype.GenerateGrid=function(){this.Init(),this.gridView.GenerateGrid(i.default.Instance.grid)},l.prototype.OnTileInteraction=function(e,l){"Pen"==e.node.name&&this.gridView.CellUpdation(l.node)},l.prototype.CancelTouch=function(){this.gridView.OnTouchEnd()},l.prototype.CompletedFlow=function(){this.gameController.FlowCompleted()},l.prototype.GameOver=function(){this.gameController.OnLevelComplete()},l=r([p],l)}(n.default));t.default=a,cc._RF.pop()},{"../../Common/Managers/GameManager":"GameManager","../../Common/Utils/BaseClass":"BaseClass","../Views/GridView":"GridView","./GameController":"GameController"}],GridModel:[function(e,l,t){"use strict";cc._RF.push(l,"508d0UoQLlEWpQiWZeInG5g","GridModel"),Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,l){this.grid=new Number[e][l]}}();t.default=o,cc._RF.pop()},{}],GridView:[function(e,l,t){"use strict";cc._RF.push(l,"e51121CcjtLb48X2Tr8ssyE","GridView");var o=this&&this.__extends||function(){var e=function(l,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,l){e.__proto__=l}||function(e,l){for(var t in l)l.hasOwnProperty(t)&&(e[t]=l[t])})(l,t)};return function(l,t){function o(){this.constructor=l}e(l,t),l.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,l,t,o){var r,n=arguments.length,c=n<3?l:null===o?o=Object.getOwnPropertyDescriptor(l,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,l,t,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(n<3?r(c):n>3?r(l,t,c):r(l,t))||c);return n>3&&c&&Object.defineProperty(l,t,c),c};Object.defineProperty(t,"__esModule",{value:!0});var n=e("../../Common/Utils/BaseClass"),c=e("../Controllers/GridController"),i=e("../../Common/Managers/GameManager"),s=e("./CellView"),d=e("../Models/CellModel"),p=cc._decorator,a=p.ccclass,u=p.property,f=function(e){function l(){var l=null!==e&&e.apply(this,arguments)||this;return l.gridController=null,l.pen=null,l.grid=null,l.completedFlowsText=null,l.spriteType=Array(),l.spriteState=Array(),l.currentCellType=0,l.previousCellId=-1,l.generatedCell=Array(),l.previousCellView=null,l.previousCell=null,l.redFlow=0,l.blueFlow=0,l.greenFlow=0,l.completedFlows=0,l.isFlowStarted=Array(),l.isFlowCompleted=Array(),l.endNodeCellId=Array(),l.gridDimension=5,l.cellSize=150,l.penXCoordinate=535,l.penYCoordinate=1073,l}return o(l,e),l.prototype.Init=function(){this.gridController=this.SetController(c.default),this.grid.on(cc.Node.EventType.TOUCH_START,this.OnTouchStart,this),this.grid.on(cc.Node.EventType.TOUCH_MOVE,this.OnTouchMove,this),this.grid.on(cc.Node.EventType.TOUCH_END,this.OnTouchEnd,this);for(var e=0;e<3;e++)this.isFlowStarted[e]=!1,this.isFlowCompleted[e]=!1,this.endNodeCellId[e]=new Array},l.prototype.GenerateGrid=function(e){this.Init();for(var l=0;l<this.gridDimension;l++)for(var t=0;t<this.gridDimension;t++){var o=this.gridDimension*l+t,r=cc.instantiate(this.cell),n=r.getComponent(s.default);n.Init(this.gridController);var c=!1;c=i.default.Instance.grid[l][t]!=d.CellType.EMPTY,r.position=cc.v2(this.startPos.x+t*this.cellSize,this.startPos.y-l*this.cellSize),r.parent=this.grid,n.SetModel(o,-1,-1,i.default.Instance.grid[l][t],0,c),this.generatedCell[o]=r,this.ChangeSprite(r),n.cellModel.isEndNode&&this.StoreEndNodeAddress(r)}},l.prototype.StoreEndNodeAddress=function(e){var l=e.getComponent(s.default);switch(l.cellModel.cellType){case 1:this.endNodeCellId[l.cellModel.cellType-1][this.redFlow++]=l.cellModel.cellId;break;case 2:this.endNodeCellId[l.cellModel.cellType-1][this.blueFlow++]=l.cellModel.cellId;break;case 3:this.endNodeCellId[l.cellModel.cellType-1][this.greenFlow++]=l.cellModel.cellId}},l.prototype.OnTouchStart=function(e){this.pen.x=e.getLocationX()-this.penXCoordinate,this.pen.y=e.getLocationY()-this.penYCoordinate,this.pen.active=!0},l.prototype.OnTouchMove=function(e){this.pen.x=e.getLocationX()-this.penXCoordinate,this.pen.y=e.getLocationY()-this.penYCoordinate},l.prototype.OnTouchEnd=function(){this.IsFlowCompleted(),cc.log("touchEnd"),this.pen.active=!1,this.currentCellType=-1,this.previousCellId=-1,this.previousCellView=null,this.previousCell=null},l.prototype.CellUpdation=function(e){var l,t,o=e.getComponent(s.default),r=-1,n=-1;l=Math.floor(o.cellModel.cellId/this.gridDimension),t=Math.floor(o.cellModel.cellId%this.gridDimension),null!=this.previousCell&&(r=Math.floor(this.previousCellView.cellModel.cellId/this.gridDimension),n=Math.floor(this.previousCellView.cellModel.cellId%this.gridDimension)),(-1==this.previousCellId&&0!=o.cellModel.cellType||-1!=this.previousCellId&&!o.cellModel.isEndNode&&0!=o.cellModel.cellType||-1!=this.previousCellId&&o.cellModel.isEndNode&&o.cellModel.cellType==this.currentCellType&&-1!=o.cellModel.cellIdNext)&&this.TrackBackFilledCells(e),-1!=this.previousCellId&&this.previousCell==e||(-1!=this.previousCellId&&o.cellModel.cellType!=this.currentCellType&&0==o.cellModel.cellState&&0!=o.cellModel.cellType?this.OnTouchEnd():o.cellModel.isEndNode&&-1==this.previousCellId?(this.previousCell=e,this.previousCellView=e.getComponent(s.default),this.previousCellId=this.previousCellView.cellModel.cellId,this.currentCellType=o.cellModel.cellType,this.isFlowStarted[o.cellModel.cellType-1]=!0,1==this.isFlowCompleted[o.cellModel.cellType-1]&&(--this.completedFlows,this.completedFlowsText.string=this.completedFlows.toString()),this.isFlowCompleted[o.cellModel.cellType-1]=!1):!o.cellModel.isEndNode&&-1!=this.previousCellId||o.cellModel.isEndNode&&-1!=this.previousCellId&&o.cellModel.cellType==this.currentCellType&&-1==o.cellModel.cellIdNext?l==r&&t+1==n||l==r&&t-1==n||l+1==r&&t==n||l-1==r&&t==n?this.previousCellView.cellModel.isEndNode&&-1!=this.previousCellView.cellModel.cellIdPrevious||(o.cellModel.cellIdPrevious=this.previousCellId,o.cellModel.cellType=this.currentCellType,this.previousCellView.cellModel.cellIdNext=o.cellModel.cellId,this.previousCellId=o.cellModel.cellId,this.ChangeSpriteState(e,this.previousCell),this.previousCell=e,this.previousCellView=this.previousCell.getComponent(s.default),!o.cellModel.isEndNode&&this.previousCellId):this.OnTouchEnd():-1==this.previousCellId&&0!=o.cellModel.cellType&&0!=o.cellModel.cellState&&(this.previousCellId=o.cellModel.cellId,this.previousCell=e,this.previousCellView=this.previousCell.getComponent(s.default),this.currentCellType=o.cellModel.cellType))},l.prototype.ChangeSprite=function(e){var l=e.getComponent(s.default);l.cellModel.cellType==d.CellType.EMPTY?e.getComponent(cc.Sprite).spriteFrame=this.spriteType[l.cellModel.cellType]:e.getComponent(cc.Sprite).spriteFrame=this.spriteState[l.cellModel.cellState],this.ChangeCellColor(e)},l.prototype.ChangeCellColor=function(e){switch(e.getComponent(s.default).cellModel.cellType){case 0:e.color=new cc.Color(255,255,255,255);break;case 1:e.color=new cc.Color(255,0,0);break;case 2:e.color=new cc.Color(0,0,255);break;case 3:e.color=new cc.Color(0,255,0)}},l.prototype.TrackBackFilledCells=function(e){var l=e.getComponent(s.default),t=null,o=null,r=null,n=0;-1!=this.previousCellId&&this.previousCell==e||(l.cellModel.isEndNode&&-1==this.previousCellId?(o=this.generatedCell[this.endNodeCellId[l.cellModel.cellType-1][0]].getComponent(s.default),r=this.generatedCell[this.endNodeCellId[l.cellModel.cellType-1][1]].getComponent(s.default),-1!=o.cellModel.cellIdNext?(t=this.generatedCell[this.endNodeCellId[l.cellModel.cellType-1][0]],n=1):-1!=r.cellModel.cellIdNext&&(t=this.generatedCell[this.endNodeCellId[l.cellModel.cellType-1][1]],n=1),1==n&&this.TrackBack(t,e,!1)):-1!=this.previousCellId&&0!=l.cellModel.cellState&&0!=l.cellModel.cellType?(t=e,l.cellModel.cellType!=this.currentCellType?this.TrackBack(t,e,!0):l.cellModel.cellType==this.currentCellType&&(this.previousCell=this.generatedCell[l.cellModel.cellIdPrevious],this.previousCellId=l.cellModel.cellIdPrevious,this.TrackBack(t,e,!1))):-1==this.previousCellId&&0!=l.cellModel.cellType&&0!=l.cellModel.cellState&&-1!=l.cellModel.cellIdNext&&(this.previousCell=e,this.previousCellId=l.cellModel.cellId,this.previousCellView=this.previousCell.getComponent(s.default),this.currentCellType=l.cellModel.cellType,this.TrackBack(this.generatedCell[l.cellModel.cellIdNext],this.generatedCell[l.cellModel.cellIdNext],!1),this.ChangeSpriteState(this.previousCell,this.generatedCell[this.previousCellView.cellModel.cellIdPrevious])))},l.prototype.TrackBack=function(e,l,t){var o=-1,r=-1,n=l.getComponent(s.default),c=e.getComponent(s.default);for(r=c.cellModel.cellIdPrevious,1==this.isFlowCompleted[c.cellModel.cellType-1]&&(this.isFlowCompleted[c.cellModel.cellType-1]=!1,--this.completedFlows,this.completedFlowsText.string=this.completedFlows.toString());-1!=c.cellModel.cellIdNext;)o=c.cellModel.cellIdNext,c.cellModel.isEndNode?c.SetModel(c.cellModel.cellId,-1,-1,n.cellModel.cellType,0,c.cellModel.isEndNode):c.SetModel(c.cellModel.cellId,-1,-1,0,0,c.cellModel.isEndNode),this.ChangeSprite(e),c=(e=this.generatedCell[o]).getComponent(s.default),this.isFlowCompleted[c.cellModel.cellType-1]=!1;if(-1==c.cellModel.cellIdNext&&(c.cellModel.isEndNode?c.SetModel(c.cellModel.cellId,-1,-1,c.cellModel.cellType,0,c.cellModel.isEndNode):c.SetModel(c.cellModel.cellId,-1,-1,0,0,c.cellModel.isEndNode),this.ChangeSprite(e)),t)for((c=(e=l).getComponent(s.default)).cellModel.cellIdPrevious=r;-1!=c.cellModel.cellIdPrevious;)r=c.cellModel.cellIdPrevious,c.cellModel.isEndNode?c.SetModel(c.cellModel.cellId,-1,-1,n.cellModel.cellType,0,c.cellModel.isEndNode):c.SetModel(c.cellModel.cellId,-1,-1,0,0,c.cellModel.isEndNode),this.ChangeSprite(e),-1==(c=(e=this.generatedCell[r]).getComponent(s.default)).cellModel.cellIdPrevious&&(c.cellModel.isEndNode?c.SetModel(c.cellModel.cellId,-1,-1,c.cellModel.cellType,0,c.cellModel.isEndNode):c.SetModel(c.cellModel.cellId,-1,-1,0,0,c.cellModel.isEndNode),this.ChangeSprite(e))},l.prototype.IsFlowCompleted=function(){null!=this.previousCellView&&this.previousCellView.cellModel.isEndNode&&-1==this.previousCellView.cellModel.cellIdNext&&-1!=this.previousCellView.cellModel.cellIdPrevious&&(this.isFlowCompleted[this.previousCellView.cellModel.cellType-1]=!0,++this.completedFlows,this.completedFlowsText.string=this.completedFlows.toString(),cc.log("FlowComplete: "+this.previousCellView.cellModel.cellType)),this.IsGameCompleted()},l.prototype.IsGameCompleted=function(){for(var e=1,l=0;l<3;l++)cc.log(this.isFlowCompleted[l]),0==this.isFlowCompleted[l]&&(e=0);1==e&&this.gridController.GameOver()},l.prototype.ChangeSpriteState=function(e,l){var t=e.getComponent(s.default),o=l.getComponent(s.default),r=t.cellModel.cellId,n=o.cellModel.cellId,c=o.cellModel.cellIdPrevious,i=Math.floor(r/this.gridDimension),d=Math.floor(r%this.gridDimension),p=Math.floor(n/this.gridDimension),a=Math.floor(n%this.gridDimension),u=Math.floor(c/this.gridDimension),f=Math.floor(c%this.gridDimension);o.cellModel.isEndNode?i+1==p&&d==a?(cc.log("upFirst"),t.cellModel.cellState=3,o.cellModel.cellState=4):p==i-1&&d==a?(cc.log("downFirst"),t.cellModel.cellState=4,o.cellModel.cellState=3):i==p&&a==d+1?(cc.log("leftFirst"),t.cellModel.cellState=5,o.cellModel.cellState=6):i==p&&d==a+1&&(cc.log("rightFirst"),t.cellModel.cellState=6,o.cellModel.cellState=5):i+1==p&&d==a&&p+1==u&&a==f?(cc.log("up"),t.cellModel.cellState=3,o.cellModel.cellState=2):p==i-1&&d==a&&u==p-1&&a==f?(cc.log("down"),t.cellModel.cellState=4,o.cellModel.cellState=2):i==p&&a==d+1&&p==u&&f==a+1?(cc.log("left"),t.cellModel.cellState=5,o.cellModel.cellState=1):i==p&&d==a+1&&p==u&&a==f+1?(cc.log("right"),t.cellModel.cellState=6,o.cellModel.cellState=1):i+1==p&&d==a&&p==u&&a==f+1?(cc.log("rightup"),t.cellModel.cellState=3,o.cellModel.cellState=9):i==p+1&&d==a&&u==p&&f+1==a?(cc.log("rightdown"),t.cellModel.cellState=4,o.cellModel.cellState=10):p==i+1&&d==a&&p==u&&a+1==f?(cc.log("leftup"),t.cellModel.cellState=3,o.cellModel.cellState=7):p==i-1&&d==a&&u==p&&f==a+1?(cc.log("leftDown"),t.cellModel.cellState=4,o.cellModel.cellState=8):i==p&&d-1==a&&p+1==u&&a==f?(cc.log("upright"),t.cellModel.cellState=6,o.cellModel.cellState=8):i==p&&d-1==a&&u+1==p&&f==a?(cc.log("downright"),t.cellModel.cellState=6,o.cellModel.cellState=7):p==i&&d+1==a&&p+1==u&&a==f?(cc.log("upLeft"),t.cellModel.cellState=5,o.cellModel.cellState=10):p==i&&d+1==a&&u+1==p&&f==a&&(cc.log("downleft"),t.cellModel.cellState=5,o.cellModel.cellState=9),this.ChangeSprite(e),this.ChangeSprite(l)},r([u(cc.Node)],l.prototype,"pen",void 0),r([u(cc.Node)],l.prototype,"grid",void 0),r([u(cc.Label)],l.prototype,"completedFlowsText",void 0),r([u(cc.Vec2)],l.prototype,"startPos",void 0),r([u([cc.Prefab])],l.prototype,"cell",void 0),r([u([cc.SpriteFrame])],l.prototype,"spriteType",void 0),r([u([cc.SpriteFrame])],l.prototype,"spriteState",void 0),l=r([a],l)}(n.default);t.default=f,cc._RF.pop()},{"../../Common/Managers/GameManager":"GameManager","../../Common/Utils/BaseClass":"BaseClass","../Controllers/GridController":"GridController","../Models/CellModel":"CellModel","./CellView":"CellView"}],LevelTemplate:[function(e,l,t){"use strict";cc._RF.push(l,"b098f3e2XRPSIlYVlw85nfv","LevelTemplate");var o=this&&this.__extends||function(){var e=function(l,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,l){e.__proto__=l}||function(e,l){for(var t in l)l.hasOwnProperty(t)&&(e[t]=l[t])})(l,t)};return function(l,t){function o(){this.constructor=l}e(l,t),l.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,l,t,o){var r,n=arguments.length,c=n<3?l:null===o?o=Object.getOwnPropertyDescriptor(l,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,l,t,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(n<3?r(c):n>3?r(l,t,c):r(l,t))||c);return n>3&&c&&Object.defineProperty(l,t,c),c};Object.defineProperty(t,"__esModule",{value:!0});var n=cc._decorator,c=n.ccclass,i=(n.property,function(e){function l(){return null!==e&&e.apply(this,arguments)||this}return o(l,e),l=r([c],l)}(cc.Component));t.default=i,cc._RF.pop()},{}],MenuController:[function(e,l,t){"use strict";cc._RF.push(l,"e2944q+8wxM+7BGoIttBNip","MenuController");var o=this&&this.__extends||function(){var e=function(l,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,l){e.__proto__=l}||function(e,l){for(var t in l)l.hasOwnProperty(t)&&(e[t]=l[t])})(l,t)};return function(l,t){function o(){this.constructor=l}e(l,t),l.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,l,t,o){var r,n=arguments.length,c=n<3?l:null===o?o=Object.getOwnPropertyDescriptor(l,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,l,t,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(n<3?r(c):n>3?r(l,t,c):r(l,t))||c);return n>3&&c&&Object.defineProperty(l,t,c),c};Object.defineProperty(t,"__esModule",{value:!0});var n=e("../../Common/Utils/BaseClass"),c=cc._decorator,i=c.ccclass,s=(c.property,function(e){function l(){return null!==e&&e.apply(this,arguments)||this}return o(l,e),l.prototype.PlayGame=function(){cc.director.loadScene("Game")},l=r([i],l)}(n.default));t.default=s,cc._RF.pop()},{"../../Common/Utils/BaseClass":"BaseClass"}],MenuView:[function(e,l,t){"use strict";cc._RF.push(l,"86a417768lNOpgVWGCbskHD","MenuView");var o=this&&this.__extends||function(){var e=function(l,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,l){e.__proto__=l}||function(e,l){for(var t in l)l.hasOwnProperty(t)&&(e[t]=l[t])})(l,t)};return function(l,t){function o(){this.constructor=l}e(l,t),l.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,l,t,o){var r,n=arguments.length,c=n<3?l:null===o?o=Object.getOwnPropertyDescriptor(l,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,l,t,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(n<3?r(c):n>3?r(l,t,c):r(l,t))||c);return n>3&&c&&Object.defineProperty(l,t,c),c};Object.defineProperty(t,"__esModule",{value:!0});var n=e("../../Common/Utils/BaseClass"),c=e("../Controllers/MenuController"),i=cc._decorator,s=i.ccclass,d=(i.property,function(e){function l(){return null!==e&&e.apply(this,arguments)||this}return o(l,e),l.prototype.start=function(){this.gameController=this.SetController(c.default)},l.prototype.PlayGame=function(){this.gameController.PlayGame()},l=r([s],l)}(n.default));t.default=d,cc._RF.pop()},{"../../Common/Utils/BaseClass":"BaseClass","../Controllers/MenuController":"MenuController"}],PenView:[function(e,l,t){"use strict";cc._RF.push(l,"f623f3md7lLrbsOrXYGOPRQ","PenView");var o=this&&this.__extends||function(){var e=function(l,t){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,l){e.__proto__=l}||function(e,l){for(var t in l)l.hasOwnProperty(t)&&(e[t]=l[t])})(l,t)};return function(l,t){function o(){this.constructor=l}e(l,t),l.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}}(),r=this&&this.__decorate||function(e,l,t,o){var r,n=arguments.length,c=n<3?l:null===o?o=Object.getOwnPropertyDescriptor(l,t):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(e,l,t,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(c=(n<3?r(c):n>3?r(l,t,c):r(l,t))||c);return n>3&&c&&Object.defineProperty(l,t,c),c};Object.defineProperty(t,"__esModule",{value:!0});var n=e("../../Common/Utils/BaseClass"),c=e("../Controllers/GridController"),i=cc._decorator,s=i.ccclass,d=(i.property,function(e){function l(){return null!==e&&e.apply(this,arguments)||this}return o(l,e),l.prototype.start=function(){this.gridController=this.SetController(c.default)},l.prototype.onCollisionEnter=function(e,l){"Grid"==e.node.name&&this.gridController.CancelTouch()},l=r([s],l)}(n.default));t.default=d,cc._RF.pop()},{"../../Common/Utils/BaseClass":"BaseClass","../Controllers/GridController":"GridController"}]},{},["GameManager","BaseClass","LevelTemplate","GameController","GridController","CellModel","GridModel","CellView","GameView","GridView","PenView","MenuController","MenuView"]);